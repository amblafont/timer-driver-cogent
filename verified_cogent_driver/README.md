# Verification

The driver is formally verified in `TimerProof.thy`

To check it, launch Isabelle with the following options:
`L4V_ARCH=ARM isabelle jedit -d ../AutoCorres -l AutoCorres -d ../cogent`

# Compilation

The files in the directory `generated` were generated with the following 
sequence of commands:

1.  `cp driver.ac generated/`
2.  
```
cogent driver.cogent  \
      --root-dir=../cogent \
      --fake-header-dir=../cogent/cogent/lib  \
      --cpp-args="-std=c99 \$CPPIN -o \$CPPOUT -E -P -I../cogent/cogent/lib -O2 -Wno-parentheses -Wno-declaration-after-statement -Wno-unused-variable -Wno-uninitialized" \
      --infer-c-funcs=generated/driver.ac  \
      -g  \
      --dist-dir=generated  \
      -o driver  \
      -A  \
      --entry-funcs=entrypoints.cfg  \
      --proof-input-c="driver_pp_inferred.c"  \
      --funused-dargent-accessors
```

3. `mv generated/driver.table generated/driver_pp_inferred.table`

# List of files
- `generated/`: files generated by the compiler (in particular, shallow 
embedding and compilation to C)
- `driver.cogent`: cogent implementation of the driver
- `driver.ac`: definition of FFI functions used in the cogent driver
- `TimerSpec.thy`: abstract driver and specification 
- `TimerProof.thy`: formal proof that the shallow embedding of the cogent driver
    satisfies the abstract specification
